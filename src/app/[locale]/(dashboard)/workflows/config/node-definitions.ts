import type { NodeDefinition } from '@/types/workflow';

// ============================================================================
// TRIGGER DEFINITIONS
// ============================================================================

// Bestellungen (order.*)
const orderTriggers: NodeDefinition[] = [
  {
    type: 'order.created',
    category: 'trigger',
    subcategory: 'Bestellungen',
    label: 'Bestellung erstellt',
    description: 'Wird ausgelöst, wenn eine neue Bestellung erstellt wird',
    icon: 'ShoppingCart01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.updated',
    category: 'trigger',
    subcategory: 'Bestellungen',
    label: 'Bestellung aktualisiert',
    description: 'Wird ausgelöst, wenn eine Bestellung geändert wird',
    icon: 'Edit01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.completed',
    category: 'trigger',
    subcategory: 'Bestellungen',
    label: 'Bestellung abgeschlossen',
    description: 'Wird ausgelöst, wenn eine Bestellung vollständig abgeschlossen wird',
    icon: 'Check',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.cancelled',
    category: 'trigger',
    subcategory: 'Bestellungen',
    label: 'Bestellung storniert',
    description: 'Wird ausgelöst, wenn eine Bestellung storniert wird',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.priority_changed',
    category: 'trigger',
    subcategory: 'Bestellungen',
    label: 'Priorität geändert',
    description: 'Wird ausgelöst, wenn die Priorität einer Bestellung geändert wird',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.table_changed',
    category: 'trigger',
    subcategory: 'Bestellungen',
    label: 'Tisch gewechselt',
    description: 'Wird ausgelöst, wenn eine Bestellung einem anderen Tisch zugewiesen wird',
    icon: 'Edit01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
];

// Bestellpositionen (order.item.*)
const orderItemTriggers: NodeDefinition[] = [
  {
    type: 'order.item.added',
    category: 'trigger',
    subcategory: 'Bestellpositionen',
    label: 'Position hinzugefügt',
    description: 'Wird ausgelöst, wenn eine Position zur Bestellung hinzugefügt wird',
    icon: 'Plus',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.item.removed',
    category: 'trigger',
    subcategory: 'Bestellpositionen',
    label: 'Position entfernt',
    description: 'Wird ausgelöst, wenn eine Position aus der Bestellung entfernt wird',
    icon: 'Minus',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.item.preparing',
    category: 'trigger',
    subcategory: 'Bestellpositionen',
    label: 'Zubereitung gestartet',
    description: 'Wird ausgelöst, wenn die Zubereitung eines Artikels beginnt',
    icon: 'Clock',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.item.ready',
    category: 'trigger',
    subcategory: 'Bestellpositionen',
    label: 'Artikel fertig',
    description: 'Wird ausgelöst, wenn ein Artikel fertig zubereitet ist',
    icon: 'Check',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.item.delivered',
    category: 'trigger',
    subcategory: 'Bestellpositionen',
    label: 'Artikel ausgegeben',
    description: 'Wird ausgelöst, wenn ein Artikel ausgegeben wurde',
    icon: 'Package',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'order.item.returned',
    category: 'trigger',
    subcategory: 'Bestellpositionen',
    label: 'Artikel zurückgegeben',
    description: 'Wird ausgelöst, wenn ein Artikel zurückgegeben/reklamiert wird',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
];

// Zahlungen (payment.*)
const paymentTriggers: NodeDefinition[] = [
  {
    type: 'payment.created',
    category: 'trigger',
    subcategory: 'Zahlungen',
    label: 'Zahlung initiiert',
    description: 'Wird ausgelöst, wenn eine Zahlung initiiert wird',
    icon: 'CreditCard01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'payment.pending',
    category: 'trigger',
    subcategory: 'Zahlungen',
    label: 'Zahlung ausstehend',
    description: 'Wird ausgelöst, wenn eine Zahlung auf Bestätigung wartet',
    icon: 'Clock',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'payment.captured',
    category: 'trigger',
    subcategory: 'Zahlungen',
    label: 'Zahlung erhalten',
    description: 'Wird ausgelöst, wenn eine Zahlung erfolgreich war',
    icon: 'Check',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'payment.failed',
    category: 'trigger',
    subcategory: 'Zahlungen',
    label: 'Zahlung fehlgeschlagen',
    description: 'Wird ausgelöst, wenn eine Zahlung fehlschlägt',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'payment.refunded',
    category: 'trigger',
    subcategory: 'Zahlungen',
    label: 'Zahlung erstattet',
    description: 'Wird ausgelöst, wenn eine Rückerstattung erfolgt',
    icon: 'Settings01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'payment.partial',
    category: 'trigger',
    subcategory: 'Zahlungen',
    label: 'Teilzahlung',
    description: 'Wird ausgelöst, wenn eine Teilzahlung erfolgt',
    icon: 'CreditCard01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
];

// Events/Veranstaltungen (event.*)
const eventTriggers: NodeDefinition[] = [
  {
    type: 'event.created',
    category: 'trigger',
    subcategory: 'Events',
    label: 'Event erstellt',
    description: 'Wird ausgelöst, wenn ein Event angelegt wird',
    icon: 'Calendar',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'event.activated',
    category: 'trigger',
    subcategory: 'Events',
    label: 'Event aktiviert',
    description: 'Wird ausgelöst, wenn ein Event aktiviert wird',
    icon: 'Zap',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'event.started',
    category: 'trigger',
    subcategory: 'Events',
    label: 'Event gestartet',
    description: 'Wird ausgelöst, wenn ein Event beginnt',
    icon: 'Play',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'event.paused',
    category: 'trigger',
    subcategory: 'Events',
    label: 'Event pausiert',
    description: 'Wird ausgelöst, wenn ein Event pausiert wird',
    icon: 'Clock',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'event.ended',
    category: 'trigger',
    subcategory: 'Events',
    label: 'Event beendet',
    description: 'Wird ausgelöst, wenn ein Event endet',
    icon: 'Check',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
];

// Produkte & Inventar (product.* / stock.*)
const productTriggers: NodeDefinition[] = [
  {
    type: 'product.created',
    category: 'trigger',
    subcategory: 'Produkte & Inventar',
    label: 'Produkt erstellt',
    description: 'Wird ausgelöst, wenn ein Produkt angelegt wird',
    icon: 'Package',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'product.updated',
    category: 'trigger',
    subcategory: 'Produkte & Inventar',
    label: 'Produkt aktualisiert',
    description: 'Wird ausgelöst, wenn ein Produkt geändert wird',
    icon: 'Edit01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'product.price_changed',
    category: 'trigger',
    subcategory: 'Produkte & Inventar',
    label: 'Preis geändert',
    description: 'Wird ausgelöst, wenn der Preis eines Produkts geändert wird',
    icon: 'CreditCard01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'stock.low',
    category: 'trigger',
    subcategory: 'Produkte & Inventar',
    label: 'Niedriger Bestand',
    description: 'Wird ausgelöst, wenn ein Produkt wenig Bestand hat',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [
      {
        name: 'threshold',
        label: 'Schwellwert',
        type: 'number',
        defaultValue: 10,
        placeholder: '10',
      },
    ],
  },
  {
    type: 'stock.depleted',
    category: 'trigger',
    subcategory: 'Produkte & Inventar',
    label: 'Ausverkauft',
    description: 'Wird ausgelöst, wenn ein Produkt ausverkauft ist',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'stock.replenished',
    category: 'trigger',
    subcategory: 'Produkte & Inventar',
    label: 'Bestand aufgefüllt',
    description: 'Wird ausgelöst, wenn ein Bestand aufgefüllt wird',
    icon: 'Plus',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
];

// Geräte & Hardware (device.* / printer.*)
const deviceTriggers: NodeDefinition[] = [
  {
    type: 'device.online',
    category: 'trigger',
    subcategory: 'Geräte & Hardware',
    label: 'Gerät online',
    description: 'Wird ausgelöst, wenn ein Gerät online geht',
    icon: 'Tablet02',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'device.offline',
    category: 'trigger',
    subcategory: 'Geräte & Hardware',
    label: 'Gerät offline',
    description: 'Wird ausgelöst, wenn ein Gerät offline geht',
    icon: 'Tablet02',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'device.error',
    category: 'trigger',
    subcategory: 'Geräte & Hardware',
    label: 'Gerätefehler',
    description: 'Wird ausgelöst, wenn ein Gerätefehler auftritt',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'printer.connected',
    category: 'trigger',
    subcategory: 'Geräte & Hardware',
    label: 'Drucker verbunden',
    description: 'Wird ausgelöst, wenn ein Drucker verbunden wird',
    icon: 'Printer',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'printer.disconnected',
    category: 'trigger',
    subcategory: 'Geräte & Hardware',
    label: 'Drucker getrennt',
    description: 'Wird ausgelöst, wenn ein Drucker getrennt wird',
    icon: 'Printer',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'printer.error',
    category: 'trigger',
    subcategory: 'Geräte & Hardware',
    label: 'Druckerfehler',
    description: 'Wird ausgelöst, wenn ein Druckerfehler auftritt',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'printer.paper_low',
    category: 'trigger',
    subcategory: 'Geräte & Hardware',
    label: 'Papier fast leer',
    description: 'Wird ausgelöst, wenn das Druckerpapier fast leer ist',
    icon: 'AlertTriangle',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
];

// Zeitbasiert (schedule.*)
const scheduleTriggers: NodeDefinition[] = [
  {
    type: 'schedule.cron',
    category: 'trigger',
    subcategory: 'Zeitbasiert',
    label: 'Cron-Ausdruck',
    description: 'Wird nach einem Cron-Zeitplan ausgelöst',
    icon: 'Clock',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [
      {
        name: 'expression',
        label: 'Cron-Ausdruck',
        type: 'text',
        placeholder: '0 * * * *',
        required: true,
      },
    ],
  },
  {
    type: 'schedule.interval',
    category: 'trigger',
    subcategory: 'Zeitbasiert',
    label: 'Intervall',
    description: 'Wird in regelmäßigen Abständen ausgelöst',
    icon: 'Clock',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [
      {
        name: 'interval',
        label: 'Intervall (Minuten)',
        type: 'number',
        placeholder: '60',
        required: true,
      },
    ],
  },
  {
    type: 'schedule.daily',
    category: 'trigger',
    subcategory: 'Zeitbasiert',
    label: 'Täglich',
    description: 'Wird täglich zu einer bestimmten Uhrzeit ausgelöst',
    icon: 'Clock',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [
      {
        name: 'time',
        label: 'Uhrzeit',
        type: 'text',
        placeholder: '08:00',
        required: true,
      },
    ],
  },
  {
    type: 'schedule.weekly',
    category: 'trigger',
    subcategory: 'Zeitbasiert',
    label: 'Wöchentlich',
    description: 'Wird wöchentlich an bestimmten Tagen ausgelöst',
    icon: 'Calendar',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [
      {
        name: 'dayOfWeek',
        label: 'Wochentag',
        type: 'select',
        options: [
          { value: '1', label: 'Montag' },
          { value: '2', label: 'Dienstag' },
          { value: '3', label: 'Mittwoch' },
          { value: '4', label: 'Donnerstag' },
          { value: '5', label: 'Freitag' },
          { value: '6', label: 'Samstag' },
          { value: '0', label: 'Sonntag' },
        ],
        required: true,
      },
      {
        name: 'time',
        label: 'Uhrzeit',
        type: 'text',
        placeholder: '08:00',
        required: true,
      },
    ],
  },
];

// Manuell & Sonstige
const manualTriggers: NodeDefinition[] = [
  {
    type: 'trigger.manual',
    category: 'trigger',
    subcategory: 'Manuell',
    label: 'Manuell',
    description: 'Wird manuell ausgelöst',
    icon: 'Play',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [],
  },
  {
    type: 'webhook.received',
    category: 'trigger',
    subcategory: 'Manuell',
    label: 'Webhook empfangen',
    description: 'Wird ausgelöst, wenn ein Webhook empfangen wird',
    icon: 'Globe01',
    color: '#10B981',
    inputs: 0,
    outputs: 1,
    configFields: [
      {
        name: 'source',
        label: 'Quelle (optional)',
        type: 'text',
        placeholder: 'z.B. sumup, stripe',
      },
    ],
  },
];

// ============================================================================
// CONDITION DEFINITIONS
// ============================================================================

export const conditionDefinitions: NodeDefinition[] = [
  {
    type: 'condition.expression',
    category: 'condition',
    subcategory: 'Allgemein',
    label: 'Ausdruck',
    description: 'Prüft einen JavaScript-ähnlichen Ausdruck',
    icon: 'Settings01',
    color: '#F59E0B',
    inputs: 1,
    outputs: 2,
    configFields: [
      {
        name: 'expression',
        label: 'Ausdruck',
        type: 'expression',
        placeholder: 'order.total > 50',
        required: true,
      },
    ],
  },
  {
    type: 'condition.order.source',
    category: 'condition',
    subcategory: 'Bestellung',
    label: 'Bestellquelle',
    description: 'Prüft, woher die Bestellung stammt',
    icon: 'Tag01',
    color: '#F59E0B',
    inputs: 1,
    outputs: 2,
    configFields: [
      {
        name: 'source',
        label: 'Quelle',
        type: 'select',
        options: [
          { value: 'pos', label: 'Kasse' },
          { value: 'qr_order', label: 'QR-Bestellung' },
          { value: 'api', label: 'API' },
        ],
        required: true,
      },
    ],
  },
  {
    type: 'condition.order.amount',
    category: 'condition',
    subcategory: 'Bestellung',
    label: 'Bestellwert',
    description: 'Prüft den Bestellwert',
    icon: 'CreditCard01',
    color: '#F59E0B',
    inputs: 1,
    outputs: 2,
    configFields: [
      {
        name: 'operator',
        label: 'Operator',
        type: 'select',
        options: [
          { value: 'gt', label: 'Größer als' },
          { value: 'gte', label: 'Größer oder gleich' },
          { value: 'lt', label: 'Kleiner als' },
          { value: 'lte', label: 'Kleiner oder gleich' },
          { value: 'eq', label: 'Gleich' },
        ],
        required: true,
      },
      {
        name: 'value',
        label: 'Wert (€)',
        type: 'number',
        placeholder: '50',
        required: true,
      },
    ],
  },
  {
    type: 'condition.order.status',
    category: 'condition',
    subcategory: 'Bestellung',
    label: 'Bestellstatus',
    description: 'Prüft den Status der Bestellung',
    icon: 'Tag01',
    color: '#F59E0B',
    inputs: 1,
    outputs: 2,
    configFields: [
      {
        name: 'status',
        label: 'Status',
        type: 'select',
        options: [
          { value: 'pending', label: 'Ausstehend' },
          { value: 'confirmed', label: 'Bestätigt' },
          { value: 'preparing', label: 'In Zubereitung' },
          { value: 'ready', label: 'Fertig' },
          { value: 'delivered', label: 'Geliefert' },
          { value: 'completed', label: 'Abgeschlossen' },
          { value: 'cancelled', label: 'Storniert' },
        ],
        required: true,
      },
    ],
  },
  {
    type: 'condition.category.match',
    category: 'condition',
    subcategory: 'Produkt',
    label: 'Kategorie enthält',
    description: 'Prüft, ob die Bestellung Artikel aus einer Kategorie enthält',
    icon: 'Tag01',
    color: '#F59E0B',
    inputs: 1,
    outputs: 2,
    configFields: [
      {
        name: 'categoryId',
        label: 'Kategorie',
        type: 'select',
        options: [], // Dynamisch befüllt
        required: true,
      },
    ],
  },
  {
    type: 'condition.items.all_ready',
    category: 'condition',
    subcategory: 'Bestellung',
    label: 'Alle Artikel fertig',
    description: 'Prüft, ob alle Artikel der Bestellung fertig sind',
    icon: 'Check',
    color: '#F59E0B',
    inputs: 1,
    outputs: 2,
    configFields: [],
  },
  {
    type: 'condition.payment.complete',
    category: 'condition',
    subcategory: 'Zahlung',
    label: 'Vollständig bezahlt',
    description: 'Prüft, ob die Bestellung vollständig bezahlt ist',
    icon: 'CreditCard01',
    color: '#F59E0B',
    inputs: 1,
    outputs: 2,
    configFields: [],
  },
];

// ============================================================================
// ACTION DEFINITIONS
// ============================================================================

// Drucken (print.*)
const printActions: NodeDefinition[] = [
  {
    type: 'print.receipt',
    category: 'action',
    subcategory: 'Drucken',
    label: 'Kassenbon drucken',
    description: 'Druckt einen Kassenbon',
    icon: 'Printer',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'printerId',
        label: 'Drucker',
        type: 'select',
        options: [{ value: 'auto', label: 'Automatisch' }],
        placeholder: 'Drucker wählen',
      },
      {
        name: 'copies',
        label: 'Kopien',
        type: 'number',
        defaultValue: 1,
      },
      {
        name: 'includeLogo',
        label: 'Logo einschließen',
        type: 'boolean',
        defaultValue: true,
      },
    ],
  },
  {
    type: 'print.kitchen',
    category: 'action',
    subcategory: 'Drucken',
    label: 'Küchenbon drucken',
    description: 'Druckt einen Küchenbon mit den Bestellpositionen',
    icon: 'Printer',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'printerId',
        label: 'Drucker',
        type: 'select',
        options: [{ value: 'auto', label: 'Automatisch (nach Kategorie)' }],
        placeholder: 'Drucker wählen',
      },
      {
        name: 'groupByCategory',
        label: 'Nach Kategorie gruppieren',
        type: 'boolean',
        defaultValue: true,
      },
    ],
  },
  {
    type: 'print.bar',
    category: 'action',
    subcategory: 'Drucken',
    label: 'Thekenbon drucken',
    description: 'Druckt einen Bon für die Theke/Bar',
    icon: 'Printer',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'printerId',
        label: 'Drucker',
        type: 'select',
        options: [{ value: 'auto', label: 'Automatisch' }],
        placeholder: 'Drucker wählen',
      },
    ],
  },
  {
    type: 'print.pickup',
    category: 'action',
    subcategory: 'Drucken',
    label: 'Abholbon drucken',
    description: 'Druckt einen Abholbon mit Nummer',
    icon: 'Printer',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'printerId',
        label: 'Drucker',
        type: 'select',
        options: [{ value: 'auto', label: 'Automatisch' }],
        placeholder: 'Drucker wählen',
      },
    ],
  },
  {
    type: 'print.invoice',
    category: 'action',
    subcategory: 'Drucken',
    label: 'Rechnung drucken',
    description: 'Druckt eine detaillierte Rechnung',
    icon: 'Printer',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'printerId',
        label: 'Drucker',
        type: 'select',
        options: [{ value: 'auto', label: 'Automatisch' }],
        placeholder: 'Drucker wählen',
      },
      {
        name: 'includeTaxDetails',
        label: 'Steuerdetails einschließen',
        type: 'boolean',
        defaultValue: true,
      },
    ],
  },
  {
    type: 'print.daily_report',
    category: 'action',
    subcategory: 'Drucken',
    label: 'Tagesbericht drucken',
    description: 'Druckt einen Tagesbericht',
    icon: 'Printer',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'printerId',
        label: 'Drucker',
        type: 'select',
        options: [{ value: 'auto', label: 'Automatisch' }],
        placeholder: 'Drucker wählen',
      },
      {
        name: 'includeDetails',
        label: 'Details einschließen',
        type: 'boolean',
        defaultValue: true,
      },
    ],
  },
  {
    type: 'print.open_drawer',
    category: 'action',
    subcategory: 'Drucken',
    label: 'Kassenschublade öffnen',
    description: 'Öffnet die Kassenschublade',
    icon: 'Printer',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'printerId',
        label: 'Drucker mit Kassenschublade',
        type: 'select',
        options: [],
        placeholder: 'Drucker wählen',
      },
    ],
  },
];

// Benachrichtigungen (notify.*)
const notifyActions: NodeDefinition[] = [
  {
    type: 'notify.device',
    category: 'action',
    subcategory: 'Benachrichtigungen',
    label: 'Gerät benachrichtigen',
    description: 'Sendet eine Push-Benachrichtigung an ein Gerät',
    icon: 'Tablet02',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'deviceId',
        label: 'Gerät',
        type: 'select',
        options: [{ value: 'all', label: 'Alle Geräte' }],
        placeholder: 'Gerät wählen',
      },
      {
        name: 'title',
        label: 'Titel',
        type: 'text',
        placeholder: 'Benachrichtigungstitel',
        required: true,
      },
      {
        name: 'message',
        label: 'Nachricht',
        type: 'textarea',
        placeholder: 'Nachrichtentext',
      },
      {
        name: 'type',
        label: 'Typ',
        type: 'select',
        options: [
          { value: 'info', label: 'Info' },
          { value: 'success', label: 'Erfolg' },
          { value: 'warning', label: 'Warnung' },
          { value: 'error', label: 'Fehler' },
          { value: 'order', label: 'Bestellung' },
        ],
        defaultValue: 'info',
      },
      {
        name: 'sound',
        label: 'Ton',
        type: 'select',
        options: [
          { value: 'default', label: 'Standard' },
          { value: 'urgent', label: 'Dringend' },
          { value: 'success', label: 'Erfolg' },
          { value: 'none', label: 'Kein Ton' },
        ],
        defaultValue: 'default',
      },
    ],
  },
  {
    type: 'notify.user',
    category: 'action',
    subcategory: 'Benachrichtigungen',
    label: 'Benutzer benachrichtigen',
    description: 'Sendet eine Benachrichtigung an einen Benutzer',
    icon: 'Tablet02',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'userId',
        label: 'Benutzer',
        type: 'select',
        options: [],
        placeholder: 'Benutzer wählen',
      },
      {
        name: 'title',
        label: 'Titel',
        type: 'text',
        placeholder: 'Benachrichtigungstitel',
        required: true,
      },
      {
        name: 'message',
        label: 'Nachricht',
        type: 'textarea',
        placeholder: 'Nachrichtentext',
      },
    ],
  },
  {
    type: 'notify.role',
    category: 'action',
    subcategory: 'Benachrichtigungen',
    label: 'Rolle benachrichtigen',
    description: 'Sendet eine Benachrichtigung an alle Benutzer mit einer Rolle',
    icon: 'Tablet02',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'role',
        label: 'Rolle',
        type: 'select',
        options: [
          { value: 'admin', label: 'Administrator' },
          { value: 'manager', label: 'Manager' },
          { value: 'cashier', label: 'Kassierer' },
          { value: 'kitchen', label: 'Küche' },
          { value: 'delivery', label: 'Ausgabe' },
        ],
        required: true,
      },
      {
        name: 'title',
        label: 'Titel',
        type: 'text',
        placeholder: 'Benachrichtigungstitel',
        required: true,
      },
      {
        name: 'message',
        label: 'Nachricht',
        type: 'textarea',
        placeholder: 'Nachrichtentext',
      },
    ],
  },
  {
    type: 'notify.display',
    category: 'action',
    subcategory: 'Benachrichtigungen',
    label: 'Display aktualisieren',
    description: 'Aktualisiert ein Küchen- oder Ausgabedisplay',
    icon: 'Tablet02',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'displayType',
        label: 'Display-Typ',
        type: 'select',
        options: [
          { value: 'kitchen', label: 'Küchendisplay' },
          { value: 'pickup', label: 'Ausgabedisplay' },
        ],
        required: true,
      },
      {
        name: 'event',
        label: 'Ereignis',
        type: 'select',
        options: [
          { value: 'new_order', label: 'Neue Bestellung' },
          { value: 'order_ready', label: 'Bestellung fertig' },
          { value: 'item_ready', label: 'Artikel fertig' },
          { value: 'order_picked_up', label: 'Bestellung abgeholt' },
        ],
        required: true,
      },
    ],
  },
  {
    type: 'notify.display.flash',
    category: 'action',
    subcategory: 'Benachrichtigungen',
    label: 'Display blinken',
    description: 'Lässt ein Display blinken zur Aufmerksamkeit',
    icon: 'Zap',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'displayId',
        label: 'Display',
        type: 'select',
        options: [{ value: 'all', label: 'Alle Displays' }],
        placeholder: 'Display wählen',
      },
      {
        name: 'color',
        label: 'Farbe',
        type: 'select',
        options: [
          { value: 'red', label: 'Rot' },
          { value: 'green', label: 'Grün' },
          { value: 'yellow', label: 'Gelb' },
          { value: 'blue', label: 'Blau' },
        ],
        defaultValue: 'green',
      },
      {
        name: 'duration',
        label: 'Dauer (Sekunden)',
        type: 'number',
        defaultValue: 3,
      },
    ],
  },
  {
    type: 'notify.broadcast',
    category: 'action',
    subcategory: 'Benachrichtigungen',
    label: 'Broadcast senden',
    description: 'Sendet eine Nachricht an alle verbundenen Geräte',
    icon: 'Send01',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'message',
        label: 'Nachricht',
        type: 'text',
        placeholder: 'Broadcast-Nachricht',
        required: true,
      },
      {
        name: 'type',
        label: 'Typ',
        type: 'select',
        options: [
          { value: 'info', label: 'Info' },
          { value: 'warning', label: 'Warnung' },
          { value: 'success', label: 'Erfolg' },
          { value: 'error', label: 'Fehler' },
        ],
        defaultValue: 'info',
      },
    ],
  },
];

// Status-Updates (update.*)
const updateActions: NodeDefinition[] = [
  {
    type: 'update.order.status',
    category: 'action',
    subcategory: 'Status-Updates',
    label: 'Bestellstatus ändern',
    description: 'Ändert den Status einer Bestellung',
    icon: 'Edit01',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'status',
        label: 'Status',
        type: 'select',
        options: [
          { value: 'confirmed', label: 'Bestätigt' },
          { value: 'preparing', label: 'In Zubereitung' },
          { value: 'ready', label: 'Fertig' },
          { value: 'delivered', label: 'Geliefert' },
          { value: 'completed', label: 'Abgeschlossen' },
          { value: 'cancelled', label: 'Storniert' },
        ],
        required: true,
      },
      {
        name: 'note',
        label: 'Notiz (optional)',
        type: 'text',
        placeholder: 'Optionale Notiz',
      },
    ],
  },
  {
    type: 'update.order.priority',
    category: 'action',
    subcategory: 'Status-Updates',
    label: 'Priorität ändern',
    description: 'Ändert die Priorität einer Bestellung',
    icon: 'AlertTriangle',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'priority',
        label: 'Priorität',
        type: 'select',
        options: [
          { value: 'low', label: 'Niedrig' },
          { value: 'normal', label: 'Normal' },
          { value: 'high', label: 'Hoch' },
          { value: 'urgent', label: 'Dringend' },
        ],
        required: true,
      },
    ],
  },
  {
    type: 'update.item.status',
    category: 'action',
    subcategory: 'Status-Updates',
    label: 'Artikelstatus ändern',
    description: 'Ändert den Status eines Bestellartikels',
    icon: 'Edit01',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'status',
        label: 'Status',
        type: 'select',
        options: [
          { value: 'pending', label: 'Ausstehend' },
          { value: 'preparing', label: 'In Zubereitung' },
          { value: 'ready', label: 'Fertig' },
          { value: 'delivered', label: 'Ausgegeben' },
          { value: 'cancelled', label: 'Storniert' },
        ],
        required: true,
      },
    ],
  },
  {
    type: 'update.product.availability',
    category: 'action',
    subcategory: 'Status-Updates',
    label: 'Verfügbarkeit ändern',
    description: 'Ändert die Verfügbarkeit eines Produkts',
    icon: 'Package',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'productId',
        label: 'Produkt',
        type: 'select',
        options: [],
        placeholder: 'Produkt wählen',
      },
      {
        name: 'available',
        label: 'Verfügbar',
        type: 'boolean',
        defaultValue: true,
      },
      {
        name: 'reason',
        label: 'Grund (optional)',
        type: 'text',
        placeholder: 'z.B. Ausverkauft',
      },
    ],
  },
  {
    type: 'update.product.stock',
    category: 'action',
    subcategory: 'Status-Updates',
    label: 'Bestand ändern',
    description: 'Ändert den Lagerbestand eines Produkts',
    icon: 'Package',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'productId',
        label: 'Produkt',
        type: 'select',
        options: [],
        placeholder: 'Produkt wählen',
      },
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'set', label: 'Setzen auf' },
          { value: 'add', label: 'Hinzufügen' },
          { value: 'subtract', label: 'Abziehen' },
        ],
        required: true,
      },
      {
        name: 'quantity',
        label: 'Menge',
        type: 'number',
        placeholder: '10',
        required: true,
      },
    ],
  },
];

// Kommunikation (send.*)
const sendActions: NodeDefinition[] = [
  {
    type: 'send.email',
    category: 'action',
    subcategory: 'Kommunikation',
    label: 'E-Mail senden',
    description: 'Sendet eine E-Mail',
    icon: 'Mail01',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'to',
        label: 'Empfänger',
        type: 'text',
        placeholder: 'email@beispiel.de',
        required: true,
      },
      {
        name: 'subject',
        label: 'Betreff',
        type: 'text',
        placeholder: 'E-Mail Betreff',
        required: true,
      },
      {
        name: 'template',
        label: 'Vorlage',
        type: 'select',
        options: [
          { value: 'order_confirmation', label: 'Bestellbestätigung' },
          { value: 'receipt', label: 'Kassenbon' },
          { value: 'low_stock', label: 'Niedriger Bestand' },
          { value: 'daily_report', label: 'Tagesbericht' },
          { value: 'custom', label: 'Benutzerdefiniert' },
        ],
      },
      {
        name: 'body',
        label: 'Nachricht',
        type: 'textarea',
        placeholder: 'E-Mail Text (bei benutzerdefiniert)',
      },
    ],
  },
  {
    type: 'send.email.receipt',
    category: 'action',
    subcategory: 'Kommunikation',
    label: 'Bon per E-Mail',
    description: 'Sendet den Kassenbon per E-Mail',
    icon: 'Mail01',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'to',
        label: 'Empfänger (leer = Kunde)',
        type: 'text',
        placeholder: 'email@beispiel.de',
      },
    ],
  },
  {
    type: 'send.webhook',
    category: 'action',
    subcategory: 'Kommunikation',
    label: 'Webhook senden',
    description: 'Sendet einen HTTP-Request an eine URL',
    icon: 'Globe01',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'url',
        label: 'URL',
        type: 'text',
        placeholder: 'https://api.example.com/webhook',
        required: true,
      },
      {
        name: 'method',
        label: 'Methode',
        type: 'select',
        options: [
          { value: 'POST', label: 'POST' },
          { value: 'GET', label: 'GET' },
          { value: 'PUT', label: 'PUT' },
          { value: 'PATCH', label: 'PATCH' },
          { value: 'DELETE', label: 'DELETE' },
        ],
        defaultValue: 'POST',
      },
      {
        name: 'headers',
        label: 'Headers (JSON)',
        type: 'textarea',
        placeholder: '{"Authorization": "Bearer token"}',
      },
      {
        name: 'body',
        label: 'Body (JSON)',
        type: 'textarea',
        placeholder: '{"key": "value"}',
      },
    ],
  },
  {
    type: 'send.websocket',
    category: 'action',
    subcategory: 'Kommunikation',
    label: 'WebSocket-Nachricht',
    description: 'Sendet eine WebSocket-Nachricht',
    icon: 'Zap',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'channel',
        label: 'Kanal',
        type: 'text',
        placeholder: 'orders',
        required: true,
      },
      {
        name: 'event',
        label: 'Event',
        type: 'text',
        placeholder: 'order_updated',
        required: true,
      },
    ],
  },
];

// Ablaufsteuerung (flow.*)
const flowActions: NodeDefinition[] = [
  {
    type: 'flow.delay',
    category: 'action',
    subcategory: 'Ablaufsteuerung',
    label: 'Verzögerung',
    description: 'Wartet eine bestimmte Zeit',
    icon: 'Clock',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'duration',
        label: 'Dauer',
        type: 'number',
        placeholder: '5',
        required: true,
      },
      {
        name: 'unit',
        label: 'Einheit',
        type: 'select',
        options: [
          { value: 'seconds', label: 'Sekunden' },
          { value: 'minutes', label: 'Minuten' },
          { value: 'hours', label: 'Stunden' },
        ],
        defaultValue: 'seconds',
      },
    ],
  },
  {
    type: 'flow.stop',
    category: 'action',
    subcategory: 'Ablaufsteuerung',
    label: 'Workflow stoppen',
    description: 'Beendet den Workflow',
    icon: 'AlertTriangle',
    color: '#3B82F6',
    inputs: 1,
    outputs: 0,
    configFields: [
      {
        name: 'reason',
        label: 'Grund (optional)',
        type: 'text',
        placeholder: 'Warum wird gestoppt?',
      },
    ],
  },
  {
    type: 'flow.call_workflow',
    category: 'action',
    subcategory: 'Ablaufsteuerung',
    label: 'Workflow aufrufen',
    description: 'Ruft einen anderen Workflow auf',
    icon: 'Play',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'workflowId',
        label: 'Workflow',
        type: 'select',
        options: [],
        placeholder: 'Workflow wählen',
        required: true,
      },
      {
        name: 'wait',
        label: 'Auf Abschluss warten',
        type: 'boolean',
        defaultValue: false,
      },
    ],
  },
];

// Logging & Audit (log.*)
const logActions: NodeDefinition[] = [
  {
    type: 'log.info',
    category: 'action',
    subcategory: 'Logging',
    label: 'Info loggen',
    description: 'Schreibt einen Info-Log-Eintrag',
    icon: 'Edit01',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'message',
        label: 'Nachricht',
        type: 'text',
        placeholder: 'Log-Nachricht',
        required: true,
      },
    ],
  },
  {
    type: 'log.warning',
    category: 'action',
    subcategory: 'Logging',
    label: 'Warnung loggen',
    description: 'Schreibt eine Warnung in das Log',
    icon: 'AlertTriangle',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'message',
        label: 'Nachricht',
        type: 'text',
        placeholder: 'Warnungsnachricht',
        required: true,
      },
    ],
  },
  {
    type: 'log.error',
    category: 'action',
    subcategory: 'Logging',
    label: 'Fehler loggen',
    description: 'Schreibt einen Fehler in das Log',
    icon: 'AlertTriangle',
    color: '#3B82F6',
    inputs: 1,
    outputs: 1,
    configFields: [
      {
        name: 'message',
        label: 'Nachricht',
        type: 'text',
        placeholder: 'Fehlernachricht',
        required: true,
      },
    ],
  },
];

// ============================================================================
// EXPORTS
// ============================================================================

// All trigger definitions
export const triggerDefinitions: NodeDefinition[] = [
  ...orderTriggers,
  ...orderItemTriggers,
  ...paymentTriggers,
  ...eventTriggers,
  ...productTriggers,
  ...deviceTriggers,
  ...scheduleTriggers,
  ...manualTriggers,
];

// All action definitions
export const actionDefinitions: NodeDefinition[] = [
  ...printActions,
  ...notifyActions,
  ...updateActions,
  ...sendActions,
  ...flowActions,
  ...logActions,
];

// All node definitions
export const allNodeDefinitions: NodeDefinition[] = [
  ...triggerDefinitions,
  ...conditionDefinitions,
  ...actionDefinitions,
];

// Get node definition by type
export function getNodeDefinition(type: string): NodeDefinition | undefined {
  return allNodeDefinitions.find((def) => def.type === type);
}

// Get definitions by category
export function getNodeDefinitionsByCategory(category: 'trigger' | 'condition' | 'action'): NodeDefinition[] {
  return allNodeDefinitions.filter((def) => def.category === category);
}

// Get unique subcategories for a category
export function getSubcategories(category: 'trigger' | 'condition' | 'action'): string[] {
  const definitions = getNodeDefinitionsByCategory(category);
  const subcategories = new Set(definitions.map((def) => def.subcategory).filter(Boolean));
  return Array.from(subcategories) as string[];
}

// Get definitions by subcategory
export function getNodeDefinitionsBySubcategory(
  category: 'trigger' | 'condition' | 'action',
  subcategory: string
): NodeDefinition[] {
  return allNodeDefinitions.filter(
    (def) => def.category === category && def.subcategory === subcategory
  );
}

// Node categories for the sidebar
export const nodeCategories = [
  {
    id: 'trigger',
    label: 'Auslöser',
    description: 'Starten den Workflow',
    color: '#10B981',
  },
  {
    id: 'condition',
    label: 'Bedingungen',
    description: 'Verzweigen den Ablauf',
    color: '#F59E0B',
  },
  {
    id: 'action',
    label: 'Aktionen',
    description: 'Führen Aufgaben aus',
    color: '#3B82F6',
  },
] as const;
